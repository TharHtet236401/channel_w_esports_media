{% load static %}
{% if error %}
<div class="alert alert-error mb-4">
    <span>{{ error }}</span>
</div>
{% endif %}

<div class="flex items-center justify-between mb-2">
    <div>
        <h2 class="font-semibold text-base md:text-lg">
            {% if post %}Edit Post{% else %}New Post{% endif %}
        </h2>
        <p class="text-xs text-base-content/60 mt-0.5">
            Manage the content and regions for this blog post.
        </p>
    </div>
    <button
        type="button"
        class="btn btn-circle btn-ghost btn-xs"
        onclick="document.getElementById('post-modal').close()"
        aria-label="Close"
    >
        âœ•
    </button>
</div>

<div class="divider my-3"></div>

<form
    method="post"
    hx-post="{{ form_action|default:request.path }}"
    hx-target="#post-table"
    hx-swap="outerHTML"
    class="space-y-4"
>
    {% csrf_token %}

    <div class="form-control">
        <label class="label">
            <span class="label-text text-sm font-semibold">Caption</span>
        </label>
        {{ form.caption }}
        {% if form.caption.errors %}
        <p class="text-error text-xs mt-1">{{ form.caption.errors.0 }}</p>
        {% endif %}
    </div>

    <div class="form-control">
        <label class="label">
            <span class="label-text text-sm font-semibold">Description</span>
        </label>
        {{ form.description }}
        {% if form.description.errors %}
        <p class="text-error text-xs mt-1">{{ form.description.errors.0 }}</p>
        {% endif %}
    </div>

    <div class="form-control">
        <label class="label">
            <span class="label-text text-sm font-semibold">Regions</span>
        </label>
        {{ form.region }}
        <label class="label">
            <span class="label-text-alt text-xs text-base-content/60">
                Hold Ctrl (or Cmd on Mac) to select multiple regions.
            </span>
        </label>
        {% if form.region.errors %}
        <p class="text-error text-xs mt-1">{{ form.region.errors.0 }}</p>
        {% endif %}
    </div>

    <div class="pt-2 flex items-center justify-end gap-2">
        <button type="button" class="btn btn-ghost btn-sm rounded-full"
                onclick="document.getElementById('post-modal').close()">
            Cancel
        </button>
        <button type="submit" class="btn btn-primary btn-sm rounded-full">
            {% if post %}Update{% else %}Create{% endif %} Post
        </button>
    </div>
</form>

